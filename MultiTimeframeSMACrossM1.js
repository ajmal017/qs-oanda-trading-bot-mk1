/*
	======================================
	 Name:			Multi-Timeframe SMA Cross - M1
	 Version:		1.0.3
	 Author:		bvRJP1NdBJXf66e3i9bPCTJJgRA2
	 Project Page:	https://www.quant-studio.com/#/project/754a4144d0
	 Generated:		Sunday, March 3rd 2019, 7:30:44 pm
	 Generator:		Quant-Studio
	======================================
*/


var _=require("underscore"),request=require("request"),pstack=require("pstack"),ss=require("./simple-stats"),methods={projectData:{boxes:{ebbfe4432a:{id:"ebbfe4432a",plugin:"8c20ba498a",name:"Candles",description:"Forex data using the [Oanda](http://developer.oanda.com/rest-live-v20/instrument-ep/) API.\n\n**Obtaining a Personal Access Token**\n\nThere is a link on your OANDA fxTrade account profile page titled “Manage API Access” (My Account -> My Services -> Manage API Access). From there, you can generate a personal access token to use with the OANDA API, as well as revoke a token you may currently have.",box:"datasource",parameters:[{name:"oanda_api_key",value:"",type:"text",label:"Oanda API Key",useEnv:!0},{name:"timeframe",value:"M1",type:"list",label:"Timeframe",list:[{label:"S5 - 5 second candlesticks / minute alignment",value:"S5"},{label:"S10 - 10 second candlesticks / minute alignment",value:"S10"},{label:"S15 - 15 second candlesticks / minute alignment",value:"S15"},{label:"S30 - 30 second candlesticks / minute alignment",value:"S30"},{label:"M1 - 1 minute candlesticks / minute alignment",value:"M1"},{label:"M2 - 2 minute candlesticks / hour alignment",value:"M2"},{label:"M4 - 4 minute candlesticks / hour alignment",value:"M4"},{label:"M5 - 5 minute candlesticks / hour alignment",value:"M5"},{label:"M10 - 10 minute candlesticks / hour alignment",value:"M10"},{label:"M15 - 15 minute candlesticks / hour alignment",value:"M15"},{label:"M30 - 30 minute candlesticks / hour alignment",value:"M30"},{label:"H1 - 1 hour candlesticks / hour alignment",value:"H1"},{label:"H2 - 2 hour candlesticks / day alignment",value:"H2"},{label:"H3 - 3 hour candlesticks / day alignment",value:"H3"},{label:"H4 - 4 hour candlesticks / day alignment",value:"H4"},{label:"H6 - 6 hour candlesticks / day alignment",value:"H6"},{label:"H8 - 8 hour candlesticks / day alignment",value:"H8"},{label:"H12 - 12 hour candlesticks / day alignment",value:"H12"},{label:"D - 1 day candlesticks / day alignment",value:"D"},{label:"W - 1 week candlesticks / aligned to start of week",value:"W"},{label:"M - 1 month candlesticks / aligned to first day of the month",value:"M"}],list_str:"S5,5 second candlesticks / minute alignment\nS10,10 second candlesticks / minute alignment\nS15,15 second candlesticks / minute alignment\nS30,30 second candlesticks / minute alignment\nM1,1 minute candlesticks / minute alignment\nM2,2 minute candlesticks / hour alignment\nM4,4 minute candlesticks / hour alignment\nM5,5 minute candlesticks / hour alignment\nM10,10 minute candlesticks / hour alignment\nM15,15 minute candlesticks / hour alignment\nM30,30 minute candlesticks / hour alignment\nH1,1 hour candlesticks / hour alignment\nH2,2 hour candlesticks / day alignment\nH3,3 hour candlesticks / day alignment\nH4,4 hour candlesticks / day alignment\nH6,6 hour candlesticks / day alignment\nH8,8 hour candlesticks / day alignment\nH12,12 hour candlesticks / day alignment\nD,1 day candlesticks / day alignment\nW,1 week candlesticks / aligned to start of week\nM,1 month candlesticks / aligned to first day of the month"},{name:"from",value:"EUR",type:"text",label:"From"},{name:"to",value:"USD",type:"text",label:"To"}],postProcessingCode:'var data = _.map(response.candles, function(item, n) {\n    return {\n        date: new Date(item.time),\n        open: parseFloat(item.ask.o),\n        high: parseFloat(item.ask.h),\n        low: parseFloat(item.ask.l),\n        close: parseFloat(item.ask.c),\n        volume: parseInt(item.volume),\n        spread: parseFloat(item.ask.o)-parseFloat(item.bid.o)\n    }\n});\n\n// Missing candles?\n//var start   = new Date(data[0].date);\n//var last    = new Date(data[data.length-1].date);\n\n\n\nreturn {\n    metas:  {\n        "market": response.instrument,\n        "interval": response.granularity,\n        "datapoints": response.candles.length\n    },\n    data:   data\n};',schema:[{prop:"open",label:"open",isDate:!1},{prop:"high",label:"high",isDate:!1},{prop:"low",label:"low",isDate:!1},{prop:"close",label:"close",isDate:!1},{prop:"volume",label:"volume",isDate:!1},{prop:"date",label:"Date",isDate:!0},{prop:"spread",label:"spread",isDate:!1}],settingsGenerator:'return {\n    name:   parameters.from+"-"+parameters.to+\' (\'+parameters.timeframe+\')\',\n    headers: {\n        "Authorization": "Bearer "+parameters.oanda_api_key\n    },\n    parameters: {\n        price: \'AB\',\n        granularity: parameters.timeframe,\n        count: 500\n    },\n    method:   "GET",\n    url: "https://api-fxtrade.oanda.com/v3/instruments/"+parameters.from+"_"+parameters.to+"/candles"\n}',outputs:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",x:216,y:139,exportVar:"open",offset:{top:-254,left:546},exportToSpreadsheet:"",connection:[{id:"prop",box:"2867534bd7",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#CFD8DC"},{id:"prop",box:"93be694afe",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#CFD8DC"},{id:"propA",box:"4d52c04125",type:"data",portType:"in",label:"Input column A",highlighted:"selected",color:"#CFD8DC"},{id:"prop",box:"ab846a43bf",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#546E7A"},{id:"prop",box:"bc241e4784",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},{id:"prop",box:"d5f00f4249",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},{id:"prop",box:"efa98043f4",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},{id:"prop",box:"cf0a714ba8",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},{id:"prop",box:"a4df044376",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#546E7A"}]},{id:"high",box:"ebbfe4432a",type:"data",portType:"out",label:"high",color:"#1E88E5",x:216,y:157,exportVar:"high",offset:{top:-236,left:546},connection:[]},{id:"low",box:"ebbfe4432a",type:"data",portType:"out",label:"low",color:"#1E88E5",x:216,y:175,exportVar:"low",offset:{top:-218,left:546},connection:[]},{id:"close",box:"ebbfe4432a",type:"data",portType:"out",label:"close",color:"#1E88E5",x:216,y:193,exportVar:"close",offset:{top:-200,left:546},connection:[]},{id:"volume",box:"ebbfe4432a",type:"data",portType:"out",label:"volume",color:"#1E88E5",x:216,y:211,exportVar:"volume",offset:{top:-182,left:546},connection:[]},{id:"date",box:"ebbfe4432a",type:"data",portType:"out",label:"Date",color:"#1E88E5",x:216,y:229,exportVar:"Date",offset:{top:-164,left:546},connection:[]},{id:"spread",box:"ebbfe4432a",type:"data",portType:"out",label:"spread",color:"#1E88E5",x:216,y:247,exportVar:"spread",offset:{top:-146,left:546},connection:[{id:"propB",box:"4d52c04125",type:"data",portType:"in",label:"Input column B",highlighted:"selected",color:"#1E88E5"}]}],x:100,y:100,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:1,minor:0,build:15},saved:{id:"8c20ba498a",name:"Candles",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Oanda",version:{major:1,minor:0,build:15},version_int:1000000015},exportVar:"datasource",selected:!1,width:121,height:165,label:"EUR-USD (M1)",dependencies:[],parents:[],ancestors:[],inputs:[]},"098f004b68":{id:"098f004b68",plugin:"8c20ba498a",name:"Candles",description:"Forex data using the [Oanda](http://developer.oanda.com/rest-live-v20/instrument-ep/) API.\n\n**Obtaining a Personal Access Token**\n\nThere is a link on your OANDA fxTrade account profile page titled “Manage API Access” (My Account -> My Services -> Manage API Access). From there, you can generate a personal access token to use with the OANDA API, as well as revoke a token you may currently have.",box:"datasource",parameters:[{name:"oanda_api_key",value:"",type:"text",label:"Oanda API Key",useEnv:!0},{name:"timeframe",value:"H1",type:"list",label:"Timeframe",list:[{label:"S5 - 5 second candlesticks / minute alignment",value:"S5"},{label:"S10 - 10 second candlesticks / minute alignment",value:"S10"},{label:"S15 - 15 second candlesticks / minute alignment",value:"S15"},{label:"S30 - 30 second candlesticks / minute alignment",value:"S30"},{label:"M1 - 1 minute candlesticks / minute alignment",value:"M1"},{label:"M2 - 2 minute candlesticks / hour alignment",value:"M2"},{label:"M4 - 4 minute candlesticks / hour alignment",value:"M4"},{label:"M5 - 5 minute candlesticks / hour alignment",value:"M5"},{label:"M10 - 10 minute candlesticks / hour alignment",value:"M10"},{label:"M15 - 15 minute candlesticks / hour alignment",value:"M15"},{label:"M30 - 30 minute candlesticks / hour alignment",value:"M30"},{label:"H1 - 1 hour candlesticks / hour alignment",value:"H1"},{label:"H2 - 2 hour candlesticks / day alignment",value:"H2"},{label:"H3 - 3 hour candlesticks / day alignment",value:"H3"},{label:"H4 - 4 hour candlesticks / day alignment",value:"H4"},{label:"H6 - 6 hour candlesticks / day alignment",value:"H6"},{label:"H8 - 8 hour candlesticks / day alignment",value:"H8"},{label:"H12 - 12 hour candlesticks / day alignment",value:"H12"},{label:"D - 1 day candlesticks / day alignment",value:"D"},{label:"W - 1 week candlesticks / aligned to start of week",value:"W"},{label:"M - 1 month candlesticks / aligned to first day of the month",value:"M"}],list_str:"S5,5 second candlesticks / minute alignment\nS10,10 second candlesticks / minute alignment\nS15,15 second candlesticks / minute alignment\nS30,30 second candlesticks / minute alignment\nM1,1 minute candlesticks / minute alignment\nM2,2 minute candlesticks / hour alignment\nM4,4 minute candlesticks / hour alignment\nM5,5 minute candlesticks / hour alignment\nM10,10 minute candlesticks / hour alignment\nM15,15 minute candlesticks / hour alignment\nM30,30 minute candlesticks / hour alignment\nH1,1 hour candlesticks / hour alignment\nH2,2 hour candlesticks / day alignment\nH3,3 hour candlesticks / day alignment\nH4,4 hour candlesticks / day alignment\nH6,6 hour candlesticks / day alignment\nH8,8 hour candlesticks / day alignment\nH12,12 hour candlesticks / day alignment\nD,1 day candlesticks / day alignment\nW,1 week candlesticks / aligned to start of week\nM,1 month candlesticks / aligned to first day of the month"},{name:"from",value:"EUR",type:"text",label:"From"},{name:"to",value:"USD",type:"text",label:"To"}],postProcessingCode:'\nreturn {\n    metas:  {\n        "market": response.instrument,\n        "interval": response.granularity,\n        "datapoints": response.candles.length\n    },\n    data:   _.map(response.candles, function(item) {\n        return {\n            date: new Date(item.time),\n            open: parseFloat(item.ask.o),\n            high: parseFloat(item.ask.h),\n            low: parseFloat(item.ask.l),\n            close: parseFloat(item.ask.c),\n            volume: parseInt(item.volume),\n            spread: parseFloat(item.ask.o)-parseFloat(item.bid.o)\n        }\n    })\n};',schema:[{prop:"open",label:"open",isDate:!1},{prop:"high",label:"high",isDate:!1},{prop:"low",label:"low",isDate:!1},{prop:"close",label:"close",isDate:!1},{prop:"volume",label:"volume",isDate:!1},{prop:"date",label:"Date",isDate:!0},{prop:"spread",label:"spread",isDate:!1}],settingsGenerator:'return {\n    name:   parameters.from+"-"+parameters.to+\' (\'+parameters.timeframe+\')\',\n    headers: {\n        "Authorization": "Bearer "+parameters.oanda_api_key\n    },\n    parameters: {\n        price: \'AB\',\n        granularity: parameters.timeframe,\n        count: 100\n    },\n    method:   "GET",\n    url: "https://api-fxtrade.oanda.com/v3/instruments/"+parameters.from+"_"+parameters.to+"/candles"\n}',outputs:[{id:"open",box:"098f004b68",type:"data",portType:"out",label:"open",color:"#1E88E5",x:215,y:1039,exportVar:"open",offset:{top:646,left:545},connection:[{id:"prop",box:"5e0e9e4310",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#1E88E5"},{id:"prop",box:"4ba58445d2",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#1E88E5"},{id:"prop",box:"6a49fa486e",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#1E88E5"}]},{id:"high",box:"098f004b68",type:"data",portType:"out",label:"high",color:"#1E88E5",x:215,y:1057,exportVar:"high",offset:{top:664,left:545},connection:[]},{id:"low",box:"098f004b68",type:"data",portType:"out",label:"low",color:"#1E88E5",x:215,y:1075,exportVar:"low",offset:{top:682,left:545},connection:[]},{id:"close",box:"098f004b68",type:"data",portType:"out",label:"close",color:"#1E88E5",x:215,y:1093,exportVar:"close",offset:{top:700,left:545},connection:[]},{id:"volume",box:"098f004b68",type:"data",portType:"out",label:"volume",color:"#1E88E5",x:215,y:1111,exportVar:"volume",offset:{top:718,left:545},connection:[]},{id:"date",box:"098f004b68",type:"data",portType:"out",label:"Date",color:"#1E88E5",x:215,y:1129,exportVar:"Date",offset:{top:736,left:545},connection:[]},{id:"spread",box:"098f004b68",type:"data",portType:"out",label:"spread",color:"#1E88E5",x:215,y:1147,exportVar:"spread",offset:{top:754,left:545},connection:[]}],x:100,y:1e3,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:1,minor:0,build:15},saved:{id:"8c20ba498a",name:"Candles",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Oanda",version:{major:1,minor:0,build:15},version_int:1000000015},exportVar:"datasource",selected:!1,width:120,height:165,label:"EUR-USD (H1)",dependencies:[],parents:[],ancestors:[],inputs:[]},"4b8f484c64":{id:"4b8f484c64",plugin:"c930eb4285",name:"H1 to M1",description:"Simple Moving Average",box:"default",code:"var newData = [];\r\nvar i;\r\n_.each(data, function(item, n) {\r\n    var d   = new Date(item.d);\r\n\tfor (i=0;i<60;i++) {\r\n\t    var obj = _.extend({},item);\r\n\t    obj.d   = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), i, 0, 0);\r\n\t    obj[options.output.output] = item[options.input.prop];\r\n\t    newData.push(obj);\r\n\t}\r\n});\r\n\r\nreturn newData;",inputs:[{id:"prop",box:"4b8f484c64",type:"data",portType:"in",label:"Input",x:601,y:1083,offset:{top:690,left:931},highlighted:!1,connection:[{id:"col",box:"d61fc945a9",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"}],color:"#1E88E5",value:""}],outputs:[{id:"output",box:"4b8f484c64",type:"data",portType:"out",label:"Output",color:"#1E88E5",x:695,y:1083,exportVar:"Output",offset:{top:690,left:1025},connection:[{id:"propB",box:"3cfa594aac",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#1E88E5"},{id:"propD",box:"fca813414b",type:"data",portType:"in",label:"Input D",highlighted:"selected",color:"#1E88E5"}]}],x:604,y:1044,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:3},saved:{id:"d3b1e545c4",name:"H1 to M1",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Timeframe",version:{major:0,minor:0,build:4},version_int:4},selected:!1,width:96,height:57,dependencies:["d61fc945a9:col"],parents:["d61fc945a9"],ancestors:["098f004b68","5e0e9e4310","4ba58445d2","d61fc945a9"],orphan:!1},"5e0e9e4310":{id:"5e0e9e4310",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"5e0e9e4310",type:"data",portType:"in",label:"Input",x:301,y:1033,offset:{top:640,left:631},highlighted:!1,color:"#1E88E5",connection:[{id:"open",box:"098f004b68",type:"data",portType:"out",label:"open",color:"#1E88E5",exportVar:"open"}]},{id:"period",box:"5e0e9e4310",type:"int",portType:"in",label:"Period",x:301,y:1051,value:3,offset:{top:658,left:631},highlighted:!1,connection:[]}],outputs:[{id:"sma",box:"5e0e9e4310",type:"data",portType:"out",label:"H1 Fast",color:"#C2185B",x:414,y:1033,exportVar:"_fastH1",offset:{top:640,left:744},exportToSpreadsheet:"",connection:[{id:"propA",box:"d61fc945a9",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#C2185B"},{id:"prop",box:"5e56184253",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#C2185B"}]}],x:304,y:994,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:115,height:75,dependencies:["098f004b68:open"],parents:["098f004b68"],ancestors:["098f004b68"],orphan:!1},"4ba58445d2":{id:"4ba58445d2",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"4ba58445d2",type:"data",portType:"in",label:"Input",x:301,y:1133,offset:{top:740,left:631},connection:[{id:"open",box:"098f004b68",type:"data",portType:"out",label:"open",color:"#1E88E5",exportVar:"open"}],highlighted:!1,color:"#1E88E5"},{id:"period",box:"4ba58445d2",type:"int",portType:"in",label:"Period",x:301,y:1151,value:7,offset:{top:758,left:631},connection:[],highlighted:!1}],outputs:[{id:"sma",box:"4ba58445d2",type:"data",portType:"out",label:"H1 Slow",color:"#4CAF50",x:417,y:1133,exportVar:"_slowH1",offset:{top:740,left:747},connection:[{id:"propB",box:"d61fc945a9",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#4CAF50"},{id:"prop",box:"7b949d4330",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#4CAF50"}],exportToSpreadsheet:""}],x:304,y:1094,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:118,height:75,dependencies:["098f004b68:open"],parents:["098f004b68"],ancestors:["098f004b68"],orphan:!1},"2867534bd7":{id:"2867534bd7",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"2867534bd7",type:"data",portType:"in",label:"Input",x:297,y:339,offset:{top:-54,left:627},highlighted:!1,connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#CFD8DC",exportVar:"open",exportToSpreadsheet:""}],color:"#546E7A"},{id:"period",box:"2867534bd7",type:"int",portType:"in",label:"Period",x:297,y:357,value:30,offset:{top:-36,left:627},highlighted:!1,connection:[]}],outputs:[{id:"sma",box:"2867534bd7",type:"data",portType:"out",label:"M1 Fast",color:"#C2185B",x:419,y:339,exportVar:"fastM1",offset:{top:-54,left:749},exportToSpreadsheet:"",connection:[{id:"propA",box:"9745d24a30",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#C2185B"}]}],x:300,y:300,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:124,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},"93be694afe":{id:"93be694afe",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"93be694afe",type:"data",portType:"in",label:"Input",x:300,y:631,offset:{top:238,left:630},highlighted:!1,connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#CFD8DC",exportVar:"open",exportToSpreadsheet:""}],color:"#546E7A"},{id:"period",box:"93be694afe",type:"int",portType:"in",label:"Period",x:300,y:649,value:120,offset:{top:256,left:630},highlighted:!1,connection:[]}],outputs:[{id:"sma",box:"93be694afe",type:"data",portType:"out",label:"Slow M1",color:"#9CCC65",x:431,y:631,exportVar:"slowM1",offset:{top:238,left:761},exportToSpreadsheet:"",connection:[{id:"propB",box:"9745d24a30",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#9CCC65"},{id:"propB",box:"148fb841dc",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#9CCC65"},{id:"propB",box:"a395694b00",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#9CCC65"}]}],x:303,y:592,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:133,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},"9745d24a30":{id:"9745d24a30",plugin:"SJ0SfU-NBQ",name:"_ < _",description:"Binary Threshold",box:"default",code:"return _.map(data, function(item, n) {\r\n\titem[options.output.col]\t= item[options.input.propA]<item[options.input.propB]?1:0;\r\n\treturn item;\r\n});",inputs:[{id:"propA",box:"9745d24a30",type:"data",portType:"in",label:"Input column",x:500,y:331,offset:{top:-62,left:830},highlighted:!1,color:"#C2185B",connection:[{id:"sma",box:"2867534bd7",type:"data",portType:"out",label:"sma",color:"#C2185B",exportVar:"sma",exportToSpreadsheet:""}]},{id:"propB",box:"9745d24a30",type:"data",portType:"in",label:"Input column",x:500,y:349,offset:{top:-44,left:830},highlighted:!1,color:"#9CCC65",connection:[{id:"sma",box:"93be694afe",type:"data",portType:"out",label:"sma",color:"#9CCC65",exportVar:"sma",exportToSpreadsheet:""}]}],outputs:[{id:"col",box:"9745d24a30",type:"data",portType:"out",label:"lt",color:"#1E88E5",x:606,y:331,exportVar:"lt",offset:{top:-62,left:936},connection:[{id:"propA",box:"3cfa594aac",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#1E88E5"},{id:"propA",box:"fca813414b",type:"data",portType:"in",label:"Input A",highlighted:"selected",color:"#1E88E5"}]}],x:503,y:292,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:2},saved:{id:"SJ0SfU-NBQ",name:"_ < _",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Conditional",version:{major:0,minor:0,build:2},version_int:2},selected:!1,width:108,height:75,dependencies:["2867534bd7:sma","93be694afe:sma"],parents:["2867534bd7","93be694afe"],ancestors:["ebbfe4432a","2867534bd7","93be694afe"],orphan:!1},d61fc945a9:{id:"d61fc945a9",plugin:"SJ0SfU-NBQ",name:"_ < _",description:"Binary Threshold",box:"default",code:"return _.map(data, function(item, n) {\r\n\titem[options.output.col]\t= item[options.input.propA]<item[options.input.propB]?1:0;\r\n\treturn item;\r\n});",inputs:[{id:"propA",box:"d61fc945a9",type:"data",portType:"in",label:"Input column",x:451,y:1083,offset:{top:690,left:781},highlighted:!1,connection:[{id:"sma",box:"5e0e9e4310",type:"data",portType:"out",label:"sma",color:"#C2185B",exportVar:"sma",exportToSpreadsheet:""}],color:"#C2185B"},{id:"propB",box:"d61fc945a9",type:"data",portType:"in",label:"Input column",x:451,y:1101,offset:{top:708,left:781},highlighted:!1,connection:[{id:"sma",box:"4ba58445d2",type:"data",portType:"out",label:"sma",color:"#4CAF50",exportVar:"sma",exportToSpreadsheet:""}],color:"#4CAF50"}],outputs:[{id:"col",box:"d61fc945a9",type:"data",portType:"out",label:"lt",color:"#1E88E5",x:557,y:1083,exportVar:"lt",offset:{top:690,left:887},connection:[{id:"prop",box:"4b8f484c64",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#1E88E5"}]}],x:454,y:1044,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:2},saved:{id:"SJ0SfU-NBQ",name:"_ < _",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Conditional",version:{major:0,minor:0,build:2},version_int:2},selected:!1,width:108,height:75,dependencies:["5e0e9e4310:sma","4ba58445d2:sma"],parents:["5e0e9e4310","4ba58445d2"],ancestors:["098f004b68","5e0e9e4310","4ba58445d2"],orphan:!1},"5e56184253":{id:"5e56184253",plugin:"d3b1e545c4",name:"H1 to M1",description:"Simple Moving Average",box:"default",code:"var newData = [];\r\nvar i;\r\n_.each(data, function(item, n) {\r\n    var d   = new Date(item.d);\r\n\tfor (i=0;i<60;i++) {\r\n\t    var obj = _.extend({},item);\r\n\t    obj.d   = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), i, 0, 0);\r\n\t    obj[options.output.output] = item[options.input.prop];\r\n\t    newData.push(obj);\r\n\t}\r\n});\r\n\r\nreturn newData;",inputs:[{id:"prop",box:"5e56184253",type:"data",portType:"in",label:"Input",x:601,y:1183,offset:{top:790,left:931},highlighted:!1,connection:[{id:"sma",box:"5e0e9e4310",type:"data",portType:"out",label:"sma",color:"#C2185B",exportVar:"sma",exportToSpreadsheet:""}],color:"#C2185B",value:""}],outputs:[{id:"output",box:"5e56184253",type:"data",portType:"out",label:"Fast",color:"#880E4F",x:691,y:1183,exportVar:"fastH1",offset:{top:790,left:1021},connection:[],exportToSpreadsheet:!0}],x:604,y:1144,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:3},saved:{id:"d3b1e545c4",name:"H1 to M1",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Timeframe",version:{major:0,minor:0,build:5},version_int:5},selected:!1,width:92,height:57,dependencies:["5e0e9e4310:sma"],parents:["5e0e9e4310"],ancestors:["098f004b68","5e0e9e4310"],orphan:!1},"7b949d4330":{id:"7b949d4330",plugin:"d3b1e545c4",name:"H1 to M1",description:"Simple Moving Average",box:"default",code:"var newData = [];\r\nvar i;\r\n_.each(data, function(item, n) {\r\n    var d   = new Date(item.d);\r\n\tfor (i=0;i<60;i++) {\r\n\t    var obj = _.extend({},item);\r\n\t    obj.d   = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), i, 0, 0);\r\n\t    obj[options.output.output] = item[options.input.prop];\r\n\t    newData.push(obj);\r\n\t}\r\n});\r\n\r\nreturn newData;",inputs:[{id:"prop",box:"7b949d4330",type:"data",portType:"in",label:"Input",x:601,y:1253,offset:{top:860,left:931},highlighted:!1,connection:[{id:"sma",box:"4ba58445d2",type:"data",portType:"out",label:"sma",color:"#4CAF50",exportVar:"sma",exportToSpreadsheet:""}],color:"#4CAF50"}],outputs:[{id:"output",box:"7b949d4330",type:"data",portType:"out",label:"Slow",color:"#33691E",x:693,y:1253,exportVar:"slowH1",offset:{top:860,left:1023},connection:[],exportToSpreadsheet:!0}],x:604,y:1214,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:3},saved:{id:"d3b1e545c4",name:"H1 to M1",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Timeframe",version:{major:0,minor:0,build:6},version_int:6},selected:!1,width:94,height:57,dependencies:["4ba58445d2:sma"],parents:["4ba58445d2"],ancestors:["098f004b68","4ba58445d2"],orphan:!1},"4d52c04125":{id:"4d52c04125",plugin:"70c5f1418f",name:"Plus - Minus",description:"plus between 2 columns",box:"default",code:"return _.map(data, function(item, n) {\r\n\tif ((!item[options.input.propA] && item[options.input.propA]!==0) || (!item[options.input.propB] && item[options.input.propB]!==0)) {\r\n\t\titem[options.output.plus]\t= null;\r\n\t\treturn item;\r\n\t}\r\n\titem[options.output.plus]\t= item[options.input.propA]+item[options.input.propB];\r\n\titem[options.output.minus]\t= item[options.input.propA]-item[options.input.propB];\r\n\treturn item;\r\n});",inputs:[{id:"propA",box:"4d52c04125",type:"data",portType:"in",label:"Input column A",x:297,y:89,offset:{top:-304,left:627},highlighted:!1,color:"#546E7A",connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#CFD8DC",exportVar:"open",exportToSpreadsheet:""}]},{id:"propB",box:"4d52c04125",type:"data",portType:"in",label:"Input column B",x:297,y:107,offset:{top:-286,left:627},highlighted:!1,color:"#1E88E5",connection:[{id:"spread",box:"ebbfe4432a",type:"data",portType:"out",label:"spread",color:"#1E88E5",exportVar:"spread"}]}],outputs:[{id:"plus",box:"4d52c04125",type:"data",portType:"out",label:"Buy Level",color:"#8D6E63",x:458,y:89,exportVar:"buyLevel",offset:{top:-304,left:788},exportToSpreadsheet:"",connection:[]},{id:"minus",box:"4d52c04125",type:"data",portType:"out",label:"Sell Level",color:"#A1887F",x:458,y:107,exportVar:"sellLevel",offset:{top:-286,left:788},exportToSpreadsheet:"",connection:[]}],x:300,y:50,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:2},saved:{id:"70c5f1418f",name:"Plus - Minus",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Math",version:{major:0,minor:0,build:2},version_int:2},selected:!1,width:163,height:75,dependencies:["ebbfe4432a:open","ebbfe4432a:spread"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},ab846a43bf:{id:"ab846a43bf",plugin:"rk-lrz8bVBX",name:"RSI",description:"RSI Indicator",box:"default",code:"var sumUp, sumDown;\r\nreturn _.map(data, function(item, n) {\r\n\tif (n<=options.input.period) {\r\n\t\titem[options.output.col] = null;\r\n\t\treturn item;\r\n\t}\r\n\tsumUp\t= 0;\r\n\tsumDown\t= 0;\r\n\tfor (j=options.input.period;j>0;j--) {\r\n\r\n\t\tvar diff = data[n-j][options.input.prop] - data[n-j-1][options.input.prop];\r\n\r\n\t\tif (diff>0) {\r\n\t\t\tsumUp += diff;\r\n\t\t} else {\r\n\t\t\tsumDown -= diff;\r\n\t\t}\r\n\t}\r\n\tvar avgDown = sumDown/options.input.period;\r\n\tvar avgUp \t= sumUp/options.input.period;\r\n\t\r\n\titem[options.output.col]\t= (100-(100/(1+(avgUp/avgDown))));\r\n\t\r\n\treturn item;\r\n});",inputs:[{id:"prop",box:"ab846a43bf",type:"data",portType:"in",label:"Input column",x:797,y:439,offset:{top:46,left:1127},highlighted:!1,color:"#546E7A",connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""}]},{id:"period",box:"ab846a43bf",type:"int",portType:"in",label:"Period",x:797,y:457,value:60,offset:{top:64,left:1127},highlighted:!1,connection:[]}],outputs:[{id:"col",box:"ab846a43bf",type:"data",portType:"out",label:"RSI",color:"#1E88E5",x:912,y:439,exportVar:"RSI",offset:{top:46,left:1242},connection:[]}],x:800,y:400,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"rk-lrz8bVBX",name:"RSI",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:117,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},"6a49fa486e":{id:"6a49fa486e",plugin:"rk-lrz8bVBX",name:"RSI",description:"RSI Indicator",box:"default",code:"var sumUp, sumDown;\r\nreturn _.map(data, function(item, n) {\r\n\tif (n<=options.input.period) {\r\n\t\titem[options.output.col] = null;\r\n\t\treturn item;\r\n\t}\r\n\tsumUp\t= 0;\r\n\tsumDown\t= 0;\r\n\tfor (j=options.input.period;j>0;j--) {\r\n\r\n\t\tvar diff = data[n-j][options.input.prop] - data[n-j-1][options.input.prop];\r\n\r\n\t\tif (diff>0) {\r\n\t\t\tsumUp += diff;\r\n\t\t} else {\r\n\t\t\tsumDown -= diff;\r\n\t\t}\r\n\t}\r\n\tvar avgDown = sumDown/options.input.period;\r\n\tvar avgUp \t= sumUp/options.input.period;\r\n\t\r\n\titem[options.output.col]\t= (100-(100/(1+(avgUp/avgDown))));\r\n\t\r\n\treturn item;\r\n});",inputs:[{id:"prop",box:"6a49fa486e",type:"data",portType:"in",label:"Input column",x:297,y:1338,offset:{top:945,left:627},highlighted:!1,color:"#1E88E5",connection:[{id:"open",box:"098f004b68",type:"data",portType:"out",label:"open",color:"#1E88E5",exportVar:"open"}]},{id:"period",box:"6a49fa486e",type:"int",portType:"in",label:"Period",x:297,y:1356,value:7,offset:{top:963,left:627},highlighted:!1,connection:[]}],outputs:[{id:"col",box:"6a49fa486e",type:"data",portType:"out",label:"RSI",color:"#1E88E5",x:412,y:1338,exportVar:"RSI-1",offset:{top:945,left:742},connection:[{id:"prop",box:"39706f4343",type:"data",portType:"in",label:"Input",highlighted:"selected",value:"",color:"#1E88E5"}]}],x:300,y:1299,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"rk-lrz8bVBX",name:"RSI",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:117,height:75,dependencies:["098f004b68:open"],parents:["098f004b68"],ancestors:["098f004b68"],orphan:!1},"39706f4343":{id:"39706f4343",plugin:"c930eb4285",name:"H1 to M1",description:"Simple Moving Average",box:"default",code:"var newData = [];\r\nvar i;\r\n_.each(data, function(item, n) {\r\n    var d   = new Date(item.d);\r\n\tfor (i=0;i<60;i++) {\r\n\t    var obj = _.extend({},item);\r\n\t    obj.d   = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), i, 0, 0);\r\n\t    obj[options.output.output] = item[options.input.prop];\r\n\t    newData.push(obj);\r\n\t}\r\n});\r\n\r\nreturn newData;",inputs:[{id:"prop",box:"39706f4343",type:"data",portType:"in",label:"Input",x:497,y:1338,offset:{top:945,left:827},highlighted:!1,connection:[{id:"col",box:"6a49fa486e",type:"data",portType:"out",label:"RSI",color:"#1E88E5",exportVar:"RSI-1"}],value:"",color:"#1E88E5"}],outputs:[{id:"output",box:"39706f4343",type:"data",portType:"out",label:"H1 RSI",color:"#1E88E5",x:588,y:1338,exportVar:"rsiH1",offset:{top:945,left:918},connection:[],exportToSpreadsheet:""}],x:500,y:1299,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:3},saved:{id:"d3b1e545c4",name:"H1 to M1",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Timeframe",version:{major:0,minor:0,build:4},version_int:4},selected:!1,width:93,height:57,dependencies:["6a49fa486e:col"],parents:["6a49fa486e"],ancestors:["098f004b68","6a49fa486e"],orphan:!1},bc241e4784:{id:"bc241e4784",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"bc241e4784",type:"data",portType:"in",label:"Input",x:300,y:431,offset:{top:38,left:630},highlighted:!1,connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""}],color:"#546E7A"},{id:"period",box:"bc241e4784",type:"int",portType:"in",label:"Period",x:300,y:449,value:60,offset:{top:56,left:630},highlighted:!1,connection:[]}],outputs:[{id:"sma",box:"bc241e4784",type:"data",portType:"out",label:"Medium M1",color:"#FDD835",x:442,y:431,exportVar:"medM1",offset:{top:38,left:772},exportToSpreadsheet:"",connection:[{id:"propA",box:"148fb841dc",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#FDD835"}]}],x:303,y:392,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:144,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},d5f00f4249:{id:"d5f00f4249",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"d5f00f4249",type:"data",portType:"in",label:"Input",x:300,y:531,offset:{top:138,left:630},highlighted:!1,connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""}],color:"#546E7A"},{id:"period",box:"d5f00f4249",type:"int",portType:"in",label:"Period",x:300,y:549,value:90,offset:{top:156,left:630},highlighted:!1,connection:[]}],outputs:[{id:"sma",box:"d5f00f4249",type:"data",portType:"out",label:"Medium 2 M1",color:"#F57C00",x:453,y:531,exportVar:"med2M1",offset:{top:138,left:783},exportToSpreadsheet:"",connection:[{id:"propA",box:"a395694b00",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#F57C00"}]}],x:303,y:492,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:155,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},"148fb841dc":{id:"148fb841dc",plugin:"SJ0SfU-NBQ",name:"_ < _",description:"Binary Threshold",box:"default",code:"return _.map(data, function(item, n) {\r\n\titem[options.output.col]\t= item[options.input.propA]<item[options.input.propB]?1:0;\r\n\treturn item;\r\n});",inputs:[{id:"propA",box:"148fb841dc",type:"data",portType:"in",label:"Input column",x:500,y:431,offset:{top:38,left:830},highlighted:!1,connection:[{id:"sma",box:"bc241e4784",type:"data",portType:"out",label:"Medium M1",color:"#FDD835",exportVar:"medM1",exportToSpreadsheet:""}],color:"#FDD835"},{id:"propB",box:"148fb841dc",type:"data",portType:"in",label:"Input column",x:500,y:449,offset:{top:56,left:830},highlighted:!1,connection:[{id:"sma",box:"93be694afe",type:"data",portType:"out",label:"Slow M1",color:"#9CCC65",exportVar:"slowM1",exportToSpreadsheet:""}],color:"#9CCC65"}],outputs:[{id:"col",box:"148fb841dc",type:"data",portType:"out",label:"lt",color:"#1E88E5",x:606,y:431,exportVar:"lt",offset:{top:38,left:936},connection:[{id:"propB",box:"fca813414b",type:"data",portType:"in",label:"Input B",highlighted:"selected",color:"#1E88E5"}]}],x:503,y:392,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:2},saved:{id:"SJ0SfU-NBQ",name:"_ < _",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Conditional",version:{major:0,minor:0,build:2},version_int:2},selected:!1,width:108,height:75,dependencies:["bc241e4784:sma","93be694afe:sma"],parents:["bc241e4784","93be694afe"],ancestors:["ebbfe4432a","93be694afe","bc241e4784"],orphan:!1},a395694b00:{id:"a395694b00",plugin:"SJ0SfU-NBQ",name:"_ < _",description:"Binary Threshold",box:"default",code:"return _.map(data, function(item, n) {\r\n\titem[options.output.col]\t= item[options.input.propA]<item[options.input.propB]?1:0;\r\n\treturn item;\r\n});",inputs:[{id:"propA",box:"a395694b00",type:"data",portType:"in",label:"Input column",x:500,y:531,offset:{top:138,left:830},highlighted:!1,connection:[{id:"sma",box:"d5f00f4249",type:"data",portType:"out",label:"Medium 2 M1",color:"#F57C00",exportVar:"med2M1",exportToSpreadsheet:""}],color:"#F57C00"},{id:"propB",box:"a395694b00",type:"data",portType:"in",label:"Input column",x:500,y:549,offset:{top:156,left:830},highlighted:!1,connection:[{id:"sma",box:"93be694afe",type:"data",portType:"out",label:"Slow M1",color:"#9CCC65",exportVar:"slowM1",exportToSpreadsheet:""}],color:"#9CCC65"}],outputs:[{id:"col",box:"a395694b00",type:"data",portType:"out",label:"lt",color:"#1E88E5",x:606,y:531,exportVar:"lt",offset:{top:138,left:936},connection:[{id:"propC",box:"fca813414b",type:"data",portType:"in",label:"Input C",highlighted:"selected",color:"#1E88E5"}]}],x:503,y:492,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:2},saved:{id:"SJ0SfU-NBQ",name:"_ < _",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Conditional",version:{major:0,minor:0,build:2},version_int:2},selected:!1,width:108,height:75,dependencies:["d5f00f4249:sma","93be694afe:sma"],parents:["d5f00f4249","93be694afe"],ancestors:["ebbfe4432a","93be694afe","d5f00f4249"],orphan:!1},fca813414b:{id:"fca813414b",plugin:"65bc5b40b6",name:"AND (x4)",description:"Binary AND operator",box:"default",code:"return _.map(data, function(item, n) {\r\n\titem[options.output.col]\t= !!item[options.input.propA]&&!!item[options.input.propB]&&!!item[options.input.propC]&&!!item[options.input.propD]===true?1:0;\r\n\treturn item;\r\n});",inputs:[{id:"propA",box:"fca813414b",type:"data",portType:"in",label:"Input A",x:747,y:239,offset:{top:-154,left:1077},highlighted:!1,color:"#1E88E5",connection:[{id:"col",box:"9745d24a30",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"}]},{id:"propB",box:"fca813414b",type:"data",portType:"in",label:"Input B",x:747,y:257,offset:{top:-136,left:1077},highlighted:!1,color:"#1E88E5",connection:[{id:"col",box:"148fb841dc",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"}]},{id:"propC",box:"fca813414b",type:"data",portType:"in",label:"Input C",x:747,y:275,offset:{top:-118,left:1077},highlighted:!1,color:"#1E88E5",connection:[{id:"col",box:"a395694b00",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"}]},{id:"propD",box:"fca813414b",type:"data",portType:"in",label:"Input D",x:747,y:293,offset:{top:-100,left:1077},highlighted:!1,color:"#1E88E5",connection:[{id:"output",box:"4b8f484c64",type:"data",portType:"out",label:"Output",color:"#1E88E5",exportVar:"Output"}]}],outputs:[{id:"col",box:"fca813414b",type:"data",portType:"out",label:"Binary AND",color:"#1E88E5",x:876,y:239,exportVar:"Binary AND",offset:{top:-154,left:1206},connection:[{id:"prop",box:"153d5c4c51",type:"data",portType:"in",label:"Binary Signal",highlighted:"selected",color:"#1E88E5"}]}],x:750,y:200,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:2},saved:{id:"65bc5b40b6",name:"AND (x4)",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Binary",version:{major:0,minor:0,build:2},version_int:2},selected:!1,width:131,height:111,dependencies:["9745d24a30:col","148fb841dc:col","a395694b00:col","4b8f484c64:output"],parents:["9745d24a30","148fb841dc","a395694b00","4b8f484c64"],ancestors:["ebbfe4432a","098f004b68","5e0e9e4310","4ba58445d2","d61fc945a9","4b8f484c64","2867534bd7","93be694afe","9745d24a30","bc241e4784","d5f00f4249","148fb841dc","a395694b00"],orphan:!1},"153d5c4c51":{id:"153d5c4c51",plugin:"H1EpDEv_X",name:"Pulse",description:"Convert a binary signal into a pulse.",box:"default",code:"return _.map(data, function(item, n) {\r\n    if (data[n][options.input.prop]==1 && data[n-1][options.input.prop]==0) {\r\n        item[options.output.pulse]\t= 1;\r\n    } else {\r\n        item[options.output.pulse]\t= 0;\r\n    }\r\n\t\r\n\treturn item;\r\n});",inputs:[{id:"prop",box:"153d5c4c51",type:"data",portType:"in",label:"Binary Signal",x:947,y:239,offset:{top:-154,left:1277},highlighted:!1,color:"#1E88E5",connection:[{id:"col",box:"fca813414b",type:"data",portType:"out",label:"Binary AND",color:"#1E88E5",exportVar:"Binary AND"}]}],outputs:[{id:"pulse",box:"153d5c4c51",type:"data",portType:"out",label:"Sell",color:"#C62828",x:1076,y:239,exportVar:"sell",offset:{top:-154,left:1406},exportToSpreadsheet:!0,connection:[]}],x:950,y:200,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"H1EpDEv_X",name:"Pulse",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Binary",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:131,height:57,dependencies:["fca813414b:col"],parents:["fca813414b"],ancestors:["ebbfe4432a","098f004b68","5e0e9e4310","4ba58445d2","d61fc945a9","4b8f484c64","2867534bd7","93be694afe","9745d24a30","bc241e4784","d5f00f4249","148fb841dc","a395694b00","fca813414b"],orphan:!1},efa98043f4:{id:"efa98043f4",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"efa98043f4",type:"data",portType:"in",label:"Input",x:297,y:239,offset:{top:-154,left:627},highlighted:!1,connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""}],color:"#546E7A"},{id:"period",box:"efa98043f4",type:"int",portType:"in",label:"Period",x:297,y:257,value:10,offset:{top:-136,left:627},highlighted:!1,connection:[]}],outputs:[{id:"sma",box:"efa98043f4",type:"data",portType:"out",label:"Superfast M1",color:"#B71C1C",x:448,y:239,exportVar:"superfastM1",offset:{top:-154,left:778},exportToSpreadsheet:"",connection:[]}],x:300,y:200,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:153,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},cf0a714ba8:{id:"cf0a714ba8",plugin:"SkXxBMLW4BQ",name:"SMA",description:"Simple Moving Average",box:"default",code:"/*\r\n\tLOG(0) simple moving average\r\n\tMaintains an array of length <options.input.period>, removing the first value and adding the new value for each iteration\r\n\tMaintains a sum of the past <options.input.period> values, using the array.shift() to substract the value being kicked out of the array\r\n*/\r\nvar buffer\t= [];\t// Temporary window buffer\r\nvar sum\t\t= 0;\t// Temporary sum\r\nvar last\t= 0;\r\nvar l;\r\n\r\nreturn _.map(data, function(item, n) {\r\n\tif (buffer.length < options.input.period || item[options.input.prop]==null || n < options.input.period) {\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t\tbuffer.push(item[options.input.prop]);\t// Add the current value\r\n\t\t}\r\n\t\titem[options.output.sma]\t= null;\r\n\t\treturn item;\r\n\t} else {\r\n\t\t// Slide the values\r\n\t\tvar removed\t= buffer.shift();\t\t\t// Remove the first value\r\n\t\tbuffer.push(item[options.input.prop]);\t// Add the new one\r\n\t\tif (removed) {\r\n\t\t\tsum\t-= removed;\r\n\t\t}\r\n\t\tif (item[options.input.prop]) {\r\n\t\t\tsum\t+= item[options.input.prop];\r\n\t\t}\r\n\t\t// Calculate the average\r\n\t\titem[options.output.sma]\t= sum/options.input.period;\r\n\t\treturn item;\r\n\t}\r\n\tlast\t= item[options.input.prop];\r\n});",inputs:[{id:"prop",box:"cf0a714ba8",type:"data",portType:"in",label:"Input",x:470,y:239,offset:{top:-154,left:800},highlighted:!1,connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""}],color:"#546E7A"},{id:"period",box:"cf0a714ba8",type:"int",portType:"in",label:"Period",x:470,y:257,value:15,offset:{top:-136,left:800},highlighted:!1,connection:[]}],outputs:[{id:"sma",box:"cf0a714ba8",type:"data",portType:"out",label:"Superfast Trigger M1",color:"#4A148C",x:663,y:239,exportVar:"superfastTriggerM1",offset:{top:-154,left:993},exportToSpreadsheet:"",connection:[]}],x:473,y:200,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"SkXxBMLW4BQ",name:"SMA",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:195,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1},a4df044376:{id:"a4df044376",plugin:"rk-lrz8bVBX",name:"RSI",description:"RSI Indicator",box:"default",code:"var sumUp, sumDown;\r\nreturn _.map(data, function(item, n) {\r\n\tif (n<=options.input.period) {\r\n\t\titem[options.output.col] = null;\r\n\t\treturn item;\r\n\t}\r\n\tsumUp\t= 0;\r\n\tsumDown\t= 0;\r\n\tfor (j=options.input.period;j>0;j--) {\r\n\r\n\t\tvar diff = data[n-j][options.input.prop] - data[n-j-1][options.input.prop];\r\n\r\n\t\tif (diff>0) {\r\n\t\t\tsumUp += diff;\r\n\t\t} else {\r\n\t\t\tsumDown -= diff;\r\n\t\t}\r\n\t}\r\n\tvar avgDown = sumDown/options.input.period;\r\n\tvar avgUp \t= sumUp/options.input.period;\r\n\t\r\n\titem[options.output.col]\t= (100-(100/(1+(avgUp/avgDown))));\r\n\t\r\n\treturn item;\r\n});",inputs:[{id:"prop",box:"a4df044376",type:"data",portType:"in",label:"Input column",x:797,y:539,offset:{top:146,left:1127},highlighted:!1,connection:[{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""}],color:"#546E7A"},{id:"period",box:"a4df044376",type:"int",portType:"in",label:"Period",x:797,y:557,value:10,offset:{top:164,left:1127},highlighted:!1,connection:[]}],outputs:[{id:"col",box:"a4df044376",type:"data",portType:"out",label:"RSI Trigger",color:"#1E88E5",x:954,y:539,exportVar:"RSITrigger",offset:{top:146,left:1284},connection:[],exportToSpreadsheet:""}],x:800,y:500,author:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",username:"Quant-Studio",version:{major:0,minor:0,build:1},saved:{id:"rk-lrz8bVBX",name:"RSI",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Indicators",version:{major:0,minor:0,build:1},version_int:1},selected:!1,width:159,height:75,dependencies:["ebbfe4432a:open"],parents:["ebbfe4432a"],ancestors:["ebbfe4432a"],orphan:!1}},created:"2018-09-09T02:58:02.387Z",engine:5,id:"754a4144d0",intro:!0,name:"Multi-Timeframe SMA Cross - M1",settings:{showLeftSideBar:!0,showRightSideBar:!1},uid:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",updated:"2018-09-09T03:15:53.438Z",version:{major:0,minor:0,build:1},saved:{id:"754a4144d0",name:"Multi-Timeframe SMA Cross - M1",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"Research/Moving Averages",version:{major:1,minor:0,build:3},version_int:1000000003},scroll:{x:367,y:489},connections:{"996ad24971":{id:"996ad24971",from:{id:"open",box:"7bb71b4506",type:"data",portType:"out",label:"open",color:"#1E88E5",exportVar:"open"},to:{id:"prop",box:"66c7654b51",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},"1415684d6b":{id:"1415684d6b",from:{id:"open",box:"098f004b68",type:"data",portType:"out",label:"open",color:"#1E88E5",exportVar:"open"},to:{id:"prop",box:"5e0e9e4310",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},"67a3414636":{id:"67a3414636",from:{id:"open",box:"098f004b68",type:"data",portType:"out",label:"open",color:"#1E88E5",exportVar:"open"},to:{id:"prop",box:"4ba58445d2",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},"5b70764fb8":{id:"5b70764fb8",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#CFD8DC",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"2867534bd7",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#CFD8DC"},color:"#546E7A"},dcb2bd483d:{id:"dcb2bd483d",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#CFD8DC",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"93be694afe",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#CFD8DC"},color:"#546E7A"},e7ff62495a:{id:"e7ff62495a",from:{id:"sma",box:"2867534bd7",type:"data",portType:"out",label:"sma",color:"#C2185B",exportVar:"sma",exportToSpreadsheet:""},to:{id:"propA",box:"9745d24a30",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#C2185B"},color:"#C2185B"},"03523d4820":{id:"03523d4820",from:{id:"sma",box:"93be694afe",type:"data",portType:"out",label:"sma",color:"#9CCC65",exportVar:"sma",exportToSpreadsheet:""},to:{id:"propB",box:"9745d24a30",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#9CCC65"},color:"#9CCC65"},cc8b0d4cad:{id:"cc8b0d4cad",from:{id:"sma",box:"5e0e9e4310",type:"data",portType:"out",label:"sma",color:"#C2185B",exportVar:"sma",exportToSpreadsheet:""},to:{id:"propA",box:"d61fc945a9",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#C2185B"},color:"#C2185B"},da01674153:{id:"da01674153",from:{id:"sma",box:"4ba58445d2",type:"data",portType:"out",label:"sma",color:"#4CAF50",exportVar:"sma",exportToSpreadsheet:""},to:{id:"propB",box:"d61fc945a9",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#4CAF50"},color:"#4CAF50"},b42a8c4655:{id:"b42a8c4655",from:{id:"col",box:"d61fc945a9",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"},to:{id:"prop",box:"4b8f484c64",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},"1fd41d41c2":{id:"1fd41d41c2",from:{id:"sma",box:"5e0e9e4310",type:"data",portType:"out",label:"sma",color:"#C2185B",exportVar:"sma",exportToSpreadsheet:""},to:{id:"prop",box:"5e56184253",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#C2185B"},color:"#C2185B"},b5f6464c67:{id:"b5f6464c67",from:{id:"sma",box:"4ba58445d2",type:"data",portType:"out",label:"sma",color:"#4CAF50",exportVar:"sma",exportToSpreadsheet:""},to:{id:"prop",box:"7b949d4330",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#4CAF50"},color:"#4CAF50"},cfaf394ed7:{id:"cfaf394ed7",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#CFD8DC",exportVar:"open",exportToSpreadsheet:""},to:{id:"propA",box:"4d52c04125",type:"data",portType:"in",label:"Input column A",highlighted:"selected",color:"#CFD8DC"},color:"#546E7A"},f202c841e3:{id:"f202c841e3",from:{id:"spread",box:"ebbfe4432a",type:"data",portType:"out",label:"spread",color:"#1E88E5",exportVar:"spread"},to:{id:"propB",box:"4d52c04125",type:"data",portType:"in",label:"Input column B",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},a160fd4078:{id:"a160fd4078",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"ab846a43bf",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#546E7A"},color:"#546E7A"},4882204108:{id:"4882204108",from:{id:"open",box:"098f004b68",type:"data",portType:"out",label:"open",color:"#1E88E5",exportVar:"open"},to:{id:"prop",box:"6a49fa486e",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},deb95e400b:{id:"deb95e400b",from:{id:"col",box:"6a49fa486e",type:"data",portType:"out",label:"RSI",color:"#1E88E5",exportVar:"RSI-1"},to:{id:"prop",box:"39706f4343",type:"data",portType:"in",label:"Input",highlighted:"selected",value:"",color:"#1E88E5"},color:"#1E88E5"},"54c3aa41d0":{id:"54c3aa41d0",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"bc241e4784",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},color:"#546E7A"},f1ebba40d2:{id:"f1ebba40d2",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"d5f00f4249",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},color:"#546E7A"},d49c194b1f:{id:"d49c194b1f",from:{id:"sma",box:"bc241e4784",type:"data",portType:"out",label:"Medium M1",color:"#FDD835",exportVar:"medM1",exportToSpreadsheet:""},to:{id:"propA",box:"148fb841dc",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#FDD835"},color:"#FDD835"},ed3b2547b9:{id:"ed3b2547b9",from:{id:"sma",box:"d5f00f4249",type:"data",portType:"out",label:"Medium 2 M1",color:"#F57C00",exportVar:"med2M1",exportToSpreadsheet:""},to:{id:"propA",box:"a395694b00",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#F57C00"},color:"#F57C00"},"197a82440f":{id:"197a82440f",from:{id:"sma",box:"93be694afe",type:"data",portType:"out",label:"Slow M1",color:"#9CCC65",exportVar:"slowM1",exportToSpreadsheet:""},to:{id:"propB",box:"148fb841dc",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#9CCC65"},color:"#9CCC65"},e1f3f74f3a:{id:"e1f3f74f3a",from:{id:"sma",box:"93be694afe",type:"data",portType:"out",label:"Slow M1",color:"#9CCC65",exportVar:"slowM1",exportToSpreadsheet:""},to:{id:"propB",box:"a395694b00",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#9CCC65"},color:"#9CCC65"},"17785c4f60":{id:"17785c4f60",from:{id:"col",box:"9745d24a30",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"},to:{id:"propA",box:"fca813414b",type:"data",portType:"in",label:"Input A",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},"31d0114275":{id:"31d0114275",from:{id:"col",box:"148fb841dc",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"},to:{id:"propB",box:"fca813414b",type:"data",portType:"in",label:"Input B",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},a70f3c43c1:{id:"a70f3c43c1",from:{id:"col",box:"a395694b00",type:"data",portType:"out",label:"lt",color:"#1E88E5",exportVar:"lt"},to:{id:"propC",box:"fca813414b",type:"data",portType:"in",label:"Input C",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},"3c78fd4a05":{id:"3c78fd4a05",from:{id:"output",box:"4b8f484c64",type:"data",portType:"out",label:"Output",color:"#1E88E5",exportVar:"Output"},to:{id:"propD",box:"fca813414b",type:"data",portType:"in",label:"Input D",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},e7aa11493e:{id:"e7aa11493e",from:{id:"col",box:"fca813414b",type:"data",portType:"out",label:"Binary AND",color:"#1E88E5",exportVar:"Binary AND"},to:{id:"prop",box:"153d5c4c51",type:"data",portType:"in",label:"Binary Signal",highlighted:"selected",color:"#1E88E5"},color:"#1E88E5"},c122304e3e:{id:"c122304e3e",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"efa98043f4",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},color:"#546E7A"},b1b8fc4f2a:{id:"b1b8fc4f2a",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"cf0a714ba8",type:"data",portType:"in",label:"Input",highlighted:"selected",color:"#546E7A"},color:"#546E7A"},"34faa945fa":{id:"34faa945fa",from:{id:"open",box:"ebbfe4432a",type:"data",portType:"out",label:"open",color:"#546E7A",exportVar:"open",exportToSpreadsheet:""},to:{id:"prop",box:"a4df044376",type:"data",portType:"in",label:"Input column",highlighted:"selected",color:"#546E7A"},color:"#546E7A"}},toposort:["ebbfe4432a","098f004b68","5e0e9e4310","4ba58445d2","d61fc945a9","4b8f484c64","2867534bd7","93be694afe","9745d24a30","5e56184253","7b949d4330","4d52c04125","ab846a43bf","6a49fa486e","39706f4343","bc241e4784","d5f00f4249","148fb841dc","a395694b00","fca813414b","153d5c4c51","efa98043f4","cf0a714ba8","a4df044376"],charting:{plots:[],charts:[]},live:!0,privacy:"private",dataMode:"live",publicData:"original",sidebar_apps:{apps:{a291474c69:{endpoint:"https://graphalgo.firebaseapp.com",name:"Charting",icon:"fa-chart-line",id:"a291474c69",charting:{plots:[{id:"pexfffg9i",name:"",charts:[{id:"zc227s65e",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"f323e14791:open",color:"#1E88E5",thickness:1,name:"open",x:"d"}},{id:"e22nryzeo",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"chart.scroller().line(mapping);",description:"The classic Japanese  Candlestick chart.",id:"605cb54dfb",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125202/quant-studio-charts/fxoispm80cobh33yfji5.png",name:"Japanese Candlesticks",publishedVersion:{build:2,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"var instance = plot.candlestick(mapping);\r\n\r\n// create scroller series with mapped data\r\nchart.scroller().line(mapping);\r\n\r\nreturn instance;",description:"Japanese Candlesticks",id:"32f4c7423d",inputs:[{label:"Open",name:"open",type:"data",value:""},{label:"High",name:"high",type:"data",value:""},{label:"Low",name:"low",type:"data",value:""},{label:"Close",name:"close",type:"data",value:""}],name:"Japanese Candlesticks",status:"public"},updated:"2018-09-16T19:13:25.270Z",version:{build:2,image:!1,major:0,minor:0},saved:{id:"605cb54dfb",name:"Japanese Candlesticks",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{open:"f323e14791:open",high:"f323e14791:high",low:"f323e14791:low",close:"f323e14791:close",name:"open",color:"#1E88E5",x:"d"}}],events:[],order:0,bounds:{left:61,top:21,width:448,height:930}}]}},"0751584fc2":{endpoint:"http://localhost:8080/",name:"localhost (dev app)",icon:"fa-vial",id:"0751584fc2",charting:{plots:[{id:"p9jcoghgp",name:"",charts:[{id:"ck5uc2zbd",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"ebbfe4432a:open",color:"#546E7A",thickness:1,name:"open",x:"d"}},{id:"0jlaf3kc2",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"chart.scroller().line(mapping);",description:"The classic Japanese  Candlestick chart.",id:"605cb54dfb",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125202/quant-studio-charts/fxoispm80cobh33yfji5.png",name:"Japanese Candlesticks",publishedVersion:{build:2,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"var instance = plot.candlestick(mapping);\r\n\r\n// create scroller series with mapped data\r\nchart.scroller().line(mapping);\r\n\r\nreturn instance;",description:"Japanese Candlesticks",id:"32f4c7423d",inputs:[{label:"Open",name:"open",type:"data",value:""},{label:"High",name:"high",type:"data",value:""},{label:"Low",name:"low",type:"data",value:""},{label:"Close",name:"close",type:"data",value:""}],name:"Japanese Candlesticks",status:"public"},updated:"2018-09-16T19:13:25.270Z",version:{build:2,image:!1,major:0,minor:0},saved:{id:"605cb54dfb",name:"Japanese Candlesticks",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{open:"ebbfe4432a:open",high:"ebbfe4432a:high",low:"ebbfe4432a:low",close:"ebbfe4432a:close",name:"open",color:"#546E7A",x:"d"}},{id:"2qt5oupua",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"2867534bd7:sma",color:"#C2185B",thickness:1,name:"M1 Fast",x:"d"}},{id:"xjuv5peaz",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"93be694afe:sma",color:"#9CCC65",thickness:1,name:"Slow M1",x:"d"}},{id:"du7uck5gk",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"4d52c04125:minus",color:"#A1887F",thickness:1,name:"Sell Level",x:"d"}},{id:"53jdts1hm",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"5e56184253:output",color:"#880E4F",thickness:1,name:"Fast",x:"d"}},{id:"0pzfmu3rm",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"7b949d4330:output",color:"#33691E",thickness:1,name:"Slow",x:"d"}},{id:"p56wdq32y",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"bc241e4784:sma",color:"#FDD835",thickness:1,name:"Medium M1",x:"d"}},{id:"r556gy3hw",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"d5f00f4249:sma",color:"#F57C00",thickness:1,name:"Medium 2 M1",x:"d"}},{id:"v7ib8xhzg",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"efa98043f4:sma",color:"#B71C1C",thickness:1,name:"Superfast M1",x:"d"}},{id:"smob3bz87",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"indicator.stroke(inputs.color+' '+inputs.thickness);",description:"Basic line chart.",id:"ec118b4b3a",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125153/quant-studio-charts/g1dvht03dmqmnmpbcc7n.png",inputs:[{defaultValue:"#E91E63",label:"Line Color",name:"color",type:"color",value:""},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T16:39:26.508Z",version:{build:3,image:!1,major:0,minor:0},saved:{id:"ec118b4b3a",name:"Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"cf0a714ba8:sma",color:"#4A148C",thickness:1,name:"Superfast Trigger M1",x:"d"}}],events:[{id:"bx4qpd2d4",label:"Sell",source:"153d5c4c51:pulse",marker:{shape:"rect",bgColor:"#C62828",textColor:"#ffffff",strokeColor:"#C62828",stokeWidth:1,fontSize:10,fontWeight:600}}],order:0,bounds:{left:61,top:21,width:448,height:465}},{id:"hiudlt6tw",name:"",charts:[{id:"slah8oj3t",data:{author:"MFLTP8v5bUbKz9hS1xmNHvJzPO03",author_name:"Julien Loutre",code:"// setup color scale ranges\r\nvar lower = parseFloat(inputs.min);\r\nvar higher = parseFloat(inputs.max);\r\nvar colorScale = anychart.scales.ordinalColor();\r\ncolorScale.ranges([{\r\n\t\tless: lower,\r\n\t\tcolor: {\r\n\t\t\tangle: 90,\r\n\t\t\tkeys: [inputs.color_low, '.95 '+inputs.color_med]\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tfrom: lower,\r\n\t\tto: higher,\r\n\t\tcolor: inputs.color_med\r\n\t},\r\n\t{\r\n\t\tgreater: higher,\r\n\t\tcolor: {\r\n\t\t\tangle: 90,\r\n\t\t\tkeys: ['.15 '+inputs.color_med, inputs.color_high]\r\n\t\t}\r\n\t}\r\n])\r\nindicator.colorScale(colorScale);\r\n\r\n// set series stroke settings using color scale\r\nindicator.stroke(function () {\r\n\treturn anychart.color.setThickness(this.scaledColor, 3);\r\n});",description:"Gradient Line",id:"8a67c04058",image:"https://res.cloudinary.com/twenty-six-medias/image/upload/v1537125138/quant-studio-charts/th3foeqq9ow9t91qbeo7.png",inputs:[{defaultValue:20,label:"Minimum",name:"min",type:"number",value:0},{defaultValue:80,label:"Maximum",name:"max",type:"number",value:100},{defaultValue:"#9CCC65",label:"Low Value",name:"color_low",type:"color",value:"#29B6F6"},{defaultValue:"#03A9F4",label:"Medium Value",name:"color_med",type:"color",value:"#8BC34A"},{defaultValue:"#D81B60",label:"High Value",name:"color_high",type:"color",value:"#C62828"},{defaultValue:1,label:"Thickness",name:"thickness",type:"number",value:1}],name:"Gradient Line",publishedVersion:{build:3,image:!1,major:0,minor:0},status:"public",type:{author_name:"Julien Loutre",code:"return plot.line(mapping);",description:"Line Charts",id:"c562a1499c",inputs:[{label:"Value",name:"value",type:"data",value:""}],name:"Line Chart",status:"public"},updated:"2018-10-14T15:56:43.269Z",version:{build:5,image:!1,major:0,minor:0},saved:{id:"8a67c04058",name:"Gradient Line",uid:"bvRJP1NdBJXf66e3i9bPCTJJgRA2",folder:"",version:{major:0,minor:0,build:1},version_int:1}},settings:{value:"a4df044376:col",min:0,max:100,color_low:"#29B6F6",color_med:"#8BC34A",color_high:"#C62828",thickness:1,name:"RSI Trigger",color:"#1E88E5",x:"d"}}],events:[],order:1,bounds:{left:61,top:486,width:448,height:465}}],scrollerRange:{from:1551454507073,to:1551650610593}}}},selected:"0751584fc2"},description:"Create your first algorithm on this blank project.\n\nA charting app is already pre-installed so you can chart your algorithm out of the box.\n\n### What next?\n\n#### Add a datasource:\n\nThe first thing you want to do is add a datasource to your project.\n\nUse the toolbar at the bottom and drag to your project, then select a datasource:\n\n![](/theme/images/tutorials/01_add_datasource.gif)\n\n\n#### Chart your datasource\n\nOn the right side of your project, click on the charting icon to toggle the Charting app then drag one of the the output port from the datasource to the charting app.\n\n![](/theme/images/tutorials/02_chart_datasource.gif)\n\n\n#### Add & connect components to transform the data\n\nUse the toolbar at the bottom of the screen to drag & select a new component.\n\nOnce the component is added to your project, connect it to the datasource, or to another component.\n\n![](/theme/images/tutorials/03_add_component.gif)\n\nIn this example, a *Simple Moving Average (SMA)* was added and connected to the *Open* price. The color of the SMA was changed to red, and then added to the charts.\n\n\n#### Add more components\n\nAdd more components to create algorithms with complex rules!\n\nYou can chain as many components as you'd like.\n\nYou can also work with multiple datasources in the same project, to work with correlation of assets for example.\n\n![](/theme/images/tutorials/04_connect_multi.gif)",timeframe:36e5,plugin:"dfbc8e4a14",variables:[]},refresh:function(e,t){e=_.extend({rights:{}},e);var a=new pstack,n={datasets:{}},o=_.filter(methods.projectData.boxes,function(e,t){return"datasource"==e.box});_.each(o,function(o){a.add(function(t){methods.executeDatasource({project:methods.projectData,datasource:methods.projectData.boxes[o.id],access_rights:e.rights[o.id],postProcessing:!0},function(e){n.datasets[o.id]=e.data,t()})})}),a.add(function(e){n.output=methods.execute(n.datasets),e()}),a.start(function(){t(n.output)})},executeBox:function(projectData,datasets,boxId,dataset_caches){var box=projectData.boxes[boxId];if(!box)return console.log("Box "+boxId+" not found"),!1;if("datasource"==box.box){dataset_caches[boxId]=_.map(datasets[boxId],function(e){return _.extend({},e)});var replacements={},spreadsheetExport={};_.each(box.outputs,function(e){replacements[e.id]=e.box+":"+e.id,e.exportToSpreadsheet&&(spreadsheetExport[e.id]=e.label)});var date=_.find(box.schema,function(e){return e.isDate});dataset_caches[boxId]=_.map(dataset_caches[boxId],function(o){return date&&(o.d=new Date(o[date.prop])),_.each(replacements,function(e,t){o[t]&&"d"!=t&&(o[e]=o[t],delete o[t])}),o})}else{if(!box.parents||0==box.parents.length)return console.log("Orphan box",box),box.orphan=!0,!1;box.orphan=!1;var dataset=[];_.each(box.parents,function(e){if(!dataset_caches[e])return console.log("Box "+e+" not found"),!1;dataset=methods.zipDatasets(dataset,dataset_caches[e])}),dataset_caches[boxId]=_.map(dataset,function(e){return _.extend({},e)});var transformParams={input:{},output:{},outputKeys:{}};_.each(box.inputs,function(e){if("data"==e.type){if(e.connection&&0<e.connection.length&&(transformParams.input[e.id]=e.connection[0].box+":"+e.connection[0].id),!e.connection)return console.log("NO CONNECTION",e,box),!1;transformParams.outputKeys[e.connection[0].box+":"+e.connection[0].id]=!0}else e.connection&&1==e.connection.length&&inputs.hasOwnProperty(e.connection[0].id)?transformParams.input[e.id]=inputs[e.connection[0].id]:transformParams.input[e.id]=e.value}),_.each(box.outputs,function(e){transformParams.output[e.id]=e.box+":"+e.id,transformParams.outputKeys[e.box+":"+e.id]=!0});var stats=ss,transform=box;try{delete box.runtimeError;try{var cb=eval("(function (data, options, plugins) {"+transform.code+"})");dataset_caches[boxId]=cb(dataset_caches[boxId],transformParams,{})}catch(e){console.log("e",e),box.runtimeError=e.message}}catch(e){console.log("ERROR",e)}}},zipDatasets:function(e,t){var o={};return _.each(e,function(e){o[new Date(e.d).getTime().toString()]=_.extend({},o[new Date(e.d).getTime().toString()],e)}),_.each(t,function(e){o[new Date(e.d).getTime().toString()]=_.extend({},o[new Date(e.d).getTime().toString()],e)}),(o=_.values(o)).sort(function(e,t){return new Date(e.d).getTime()-new Date(t.d).getTime()}),o},execute:function(e){var t,o,a={};t=methods.projectData,o=e,_.each(t.toposort,function(e){methods.executeBox(t,o,e,a)}),e=o;var n={},r={};_.each(methods.projectData.boxes,function(e){_.each(e.outputs,function(t){t.exportVar&&(n[t.exportVar]={box:t.box,id:t.id},_.each(a[t.box],function(e){e.hasOwnProperty(t.box+":"+t.id)&&(r[e.d]||(r[e.d]={d:e.d}),r[e.d][t.exportVar]=e[t.box+":"+t.id])}))})});var i=_.map(r,function(e){return e.d=new Date(e.d),e});return i.sort(function(e,t){return e.d-t.d}),i},executeDatasource:function(e,o){methods.request({data:e.datasource,access_rights:e.access_rights,project:e.project,limit:e.limit,postProcessing:e.postProcessing},function(e,t){if(!e)return o({error:t}),!1;o(e)})},request:function(params,callback){params=_.extend({data:{},limit:500,access_rights:!1,postProcessing:!0},params);var datasource=params.data,envs={},parameters={};_.each(datasource.parameters,function(e){parameters[e.name]=e.value,e.useEnv&&(envs[e.value]=e.name)});var stack=new pstack;0<_.keys(envs).length&&params.access_rights&&_.each(params.access_rights,function(e,t){parameters[t]=e}),stack.add(function(done){try{var settingsGenerator=eval("(function(parameters) {"+datasource.settingsGenerator+"})"),settings=settingsGenerator(parameters)}catch(e){return console.log("request()","ERROR settingsGenerator",e),callback({status:"Javascript Error",error:e.stack}),!1}var obj={};switch(settings.method.toLowerCase()){case"post":var obj={url:settings.url,method:"POST",json:settings.parameters,headers:settings.headers};break;case"get":var obj={url:settings.url,method:"GET",qs:settings.parameters,headers:settings.headers}}request(obj,function(error,response,body){var output;try{output=JSON.parse(body)}catch(e){return callback({status:"Request Error",error:e,body:body}),!1}if(params.postProcessing){try{var postProcessing=eval("(function(parameters, response, headers) {"+datasource.postProcessingCode+"})"),output=postProcessing(parameters,output,response.headers)}catch(e){return console.log("request()","ERROR postProcessing",e),callback({status:"Javascript Error",error:e.stack}),!1}var date=_.find(datasource.schema,function(e){return e.isDate});date&&(date=date.prop),params.limit&&(output.data=output.data.slice(0,parseInt(params.limit))),output.data=_.map(output.data,function(e,t){return date||(e.d=t),e}),output.name=settings.name}return callback(output),!1})}),stack.start(function(){})}};module.exports=methods;